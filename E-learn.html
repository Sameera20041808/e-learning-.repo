<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>E‑Learning Platform – UI Prototype</title>
  <style>
    :root{
      --bg: #0b1020;           /* deep navy */
      --panel: #111731;        /* card */
      --muted: #8a93ad;        /* text secondary */
      --text: #e9eefc;         /* text */
      --brand: #6ca2ff;        /* primary */
      --brand-2: #8ef6d0;      /* accent */
      --danger: #ff6b6b;
      --ok: #2dd4bf;
      --ring: rgba(108,162,255,.35);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html,body{margin:0; height:100%;}
    body{font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; background: radial-gradient(1200px 800px at 80% -10%, #1a2250, transparent 60%), var(--bg); color: var(--text);}

    /* Layout */
    .container{max-width:1200px; margin:0 auto; padding: 24px;}
    header{
      position:sticky; top:0; z-index:10; backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(11,16,32,.9), rgba(11,16,32,.6));
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:16px 24px;}
    .brand{display:flex; align-items:center; gap:12px; font-weight:700; letter-spacing:.3px}
    .logo{width:34px; height:34px; border-radius:12px; background: conic-gradient(from 200deg, var(--brand), var(--brand-2)); box-shadow: 0 0 0 6px rgba(140, 200, 255, .1);}    
    .nav a{color:var(--muted); text-decoration:none; padding:8px 12px; border-radius:10px}
    .nav a.active, .nav a:hover{color:var(--text); background: rgba(255,255,255,.06)}

    /* Hero */
    .hero{display:grid; grid-template-columns: 1.2fr 1fr; gap:24px; align-items:center; padding:32px 24px 12px;}
    .card{background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius: var(--radius); box-shadow: var(--shadow);}
    .card.pad{padding:24px}
    .title{font-size: clamp(28px, 4vw, 40px); margin:0 0 8px;}
    .subtitle{color: var(--muted); margin:0 0 18px}
    .btn{display:inline-flex; align-items:center; gap:10px; padding:10px 16px; border-radius:12px; border:1px solid rgba(255,255,255,.1); background: linear-gradient(180deg, rgba(108,162,255,.2), rgba(108,162,255,.06)); color:white; cursor:pointer}
    .btn:hover{filter:brightness(1.05)}
    .btn.ghost{background: transparent}
    .btn.danger{background: linear-gradient(180deg, rgba(255,107,107,.25), rgba(255,107,107,.08)); border-color: rgba(255,107,107,.35)}

    /* Grid */
    .grid{display:grid; gap:16px}
    .grid.cards{grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));}

    /* Course Card */
    .course{overflow:hidden; display:flex; flex-direction:column}
    .thumb{aspect-ratio: 16/9; background: linear-gradient(135deg, rgba(108,162,255,.25), rgba(142,246,208,.15)); position:relative}
    .price{position:absolute; bottom:8px; right:8px; background: rgba(0,0,0,.35); padding:6px 10px; border-radius:10px; font-weight:700}
    .course .body{padding:14px 16px; display:flex; flex-direction:column; gap:6px}
    .course h4{margin:0; font-size:16px}
    .muted{color:var(--muted)}

    /* Player/Progress */
    .player{aspect-ratio: 16/9; width:100%; background:#020617; border-radius: 14px; border:1px solid rgba(255,255,255,.08); display:grid; place-items:center}
    .progress{height:10px; background: rgba(255,255,255,.08); border-radius:999px; overflow:hidden;}
    .progress > i{display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--brand), var(--brand-2));}

    /* Forms */
    .field{display:flex; flex-direction:column; gap:6px}
    .input{background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); color:var(--text); padding:10px 12px; border-radius:12px; outline:none}
    .input:focus{box-shadow:0 0 0 4px var(--ring)}

    /* Modal */
    dialog{border:none; border-radius:18px; padding:0; background: transparent}
    dialog::backdrop{background: rgba(2,6,23,.7);}
    .modal{background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); border:1px solid rgba(255,255,255,.1); padding:22px; width:min(96vw, 420px); border-radius:18px}

    footer{padding:26px; text-align:center; color:var(--muted)}

    @media (max-width: 920px){
      .hero{grid-template-columns: 1fr}
    }
  </style>
</head>
<body>
  <header>
    <nav class="nav container">
      <div class="brand"><div class="logo"></div> E‑Learning</div>
      <div id="nav-links">
        <a href="#home" class="active">Home</a>
        <a href="#courses">Courses</a>
        <a href="#profile">Profile</a>
        <button class="btn ghost" id="loginBtn">Sign In</button>
      </div>
    </nav>
  </header>

  <main class="container">
    <!-- Hero / CTA -->
    <section id="home" class="hero">
      <div class="card pad">
        <h1 class="title">Learn faster. Track progress. Get certified.</h1>
        <p class="subtitle">Modern courses with video lessons, quizzes, and certificates. Secure payments via Stripe or PayPal.</p>
        <div style="display:flex; gap:12px; flex-wrap:wrap">
          <button class="btn" onclick="scrollToSection('courses')">Browse Courses</button>
          <button class="btn ghost" id="ctaLogin">Sign In</button>
        </div>
      </div>
      <div class="card pad">
        <div class="player">Video player placeholder</div>
        <div style="margin-top:16px; display:grid; gap:10px">
          <div class="progress"><i id="demoProgress" style="width:42%"></i></div>
          <small class="muted">Your current course completion: <b id="demoProgressText">42%</b></small>
        </div>
      </div>
    </section>

    <!-- Courses Grid -->
    <section id="courses" style="margin-top:24px">
      <h2 style="margin:8px 0 14px">Popular Courses</h2>
      <div class="grid cards" id="courseGrid"></div>
    </section>

    <!-- Course Detail/Checkout -->
    <section id="courseDetail" style="display:none; margin-top:28px" class="card pad">
      <div style="display:grid; grid-template-columns: 1.2fr 1fr; gap:20px; align-items:start">
        <div>
          <div class="player" id="videoPlayer">Select a lesson to start</div>
          <h3 id="cdTitle" style="margin:16px 0 6px">—</h3>
          <p id="cdDesc" class="muted">—</p>
          <div style="margin-top:14px" class="progress"><i id="cdProgress" style="width:0%"></i></div>
          <small class="muted">Progress: <b id="cdProgressText">0%</b></small>
        </div>
        <aside class="card pad">
          <h4 style="margin:0 0 10px">Lessons</h4>
          <div id="lessonList" class="grid"></div>
          <div style="display:flex; align-items:center; justify-content:space-between; margin-top:16px">
            <div>
              <div class="muted">Price</div>
              <div id="cdPrice" style="font-weight:700">$—</div>
            </div>
            <button class="btn" id="checkoutBtn">Checkout</button>
          </div>
        </aside>
      </div>
    </section>

    <!-- Profile -->
    <section id="profile" style="display:none; margin-top:24px" class="card pad">
      <h3 style="margin:0 0 10px">Profile</h3>
      <div id="profileBox" class="muted">Sign in to see your enrollments and progress.</div>
    </section>
  </main>

  <footer>
    © <span id="year"></span> E‑Learning. All rights reserved.
  </footer>

  <!-- Login Modal -->
  <dialog id="loginModal">
    <form method="dialog" class="modal">
      <h3 style="margin:0 0 12px">Welcome back</h3>
      <div class="grid" style="gap:12px">
        <label class="field">
          <span class="muted">Email</span>
          <input class="input" id="email" type="email" placeholder="you@example.com" required />
        </label>
        <label class="field">
          <span class="muted">Password</span>
          <input class="input" id="password" type="password" placeholder="••••••••" required />
        </label>
        <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:4px">
          <button class="btn ghost" value="cancel">Cancel</button>
          <button class="btn" id="loginSubmit" value="default">Sign In</button>
        </div>
      </div>
    </form>
  </dialog>

  <script>
    // === Replace with your backend base URL ===
    const API_BASE = "http://localhost:8080/api"; // Spring Boot base

    const state = {
      token: localStorage.getItem('token') || null,
      user: JSON.parse(localStorage.getItem('user') || 'null'),
      courses: [],
      selectedCourse: null,
      progress: {},
    };

    // Basic router-ish nav handling
    function scrollToSection(id){
      document.querySelector(id.startsWith('#') ? id : `#${id}`)?.scrollIntoView({behavior:'smooth'});
    }

    function setActiveNav(hash){
      document.querySelectorAll('.nav a').forEach(a=>a.classList.toggle('active', a.getAttribute('href')===hash));
      // toggle sections
      document.querySelector('#profile').style.display = (hash==="#profile") ? 'block':'none';
    }

    window.addEventListener('hashchange', ()=> setActiveNav(location.hash));

    // Demo data while backend is wiring up
    const demoCourses = [
      {id:1, title:'Java Spring Boot Essentials', description:'Build REST APIs with Spring Boot 3.', price:49.0, lessons:[
        {id:11, title:'Intro to Spring', videoUrl:'#'},
        {id:12, title:'Controllers & Routing', videoUrl:'#'},
        {id:13, title:'Data JPA Basics', videoUrl:'#'},
      ]},
      {id:2, title:'React for Beginners', description:'Components, hooks, and state management.', price:39.0, lessons:[
        {id:21, title:'JSX & Components', videoUrl:'#'},
        {id:22, title:'Hooks Deep Dive', videoUrl:'#'},
        {id:23, title:'Routing 101', videoUrl:'#'},
      ]},
      {id:3, title:'DevOps with Kubernetes', description:'Docker, K8s, and GitHub Actions CI/CD.', price:59.0, lessons:[
        {id:31, title:'Containers & Images', videoUrl:'#'},
        {id:32, title:'Deployments & Services', videoUrl:'#'},
        {id:33, title:'Ingress & Canary', videoUrl:'#'},
      ]}
    ];

    function fmtCurrency(n){return new Intl.NumberFormat(undefined,{style:'currency',currency:'USD'}).format(n)}

    function renderCourses(){
      const grid = document.getElementById('courseGrid');
      grid.innerHTML = '';
      (state.courses.length? state.courses : demoCourses).forEach(c=>{
        const card = document.createElement('div');
        card.className = 'card course';
        card.innerHTML = `
          <div class="thumb">
            <div class="price">${fmtCurrency(c.price)}</div>
          </div>
          <div class="body">
            <h4>${c.title}</h4>
            <div class="muted" style="min-height:40px">${c.description}</div>
            <div style="display:flex; gap:10px; margin-top:6px">
              <button class="btn" data-id="${c.id}">View</button>
              <button class="btn ghost" data-buy="${c.id}">Buy</button>
            </div>
          </div>`;
        card.querySelector('[data-id]').onclick = ()=> openCourse(c.id);
        card.querySelector('[data-buy]').onclick = ()=> checkout(c.id);
        grid.appendChild(card);
      })
    }

    function openCourse(id){
      const course = (state.courses.length? state.courses : demoCourses).find(c=>c.id==id);
      state.selectedCourse = course;
      document.getElementById('cdTitle').textContent = course.title;
      document.getElementById('cdDesc').textContent = course.description;
      document.getElementById('cdPrice').textContent = fmtCurrency(course.price);

      // lessons
      const list = document.getElementById('lessonList');
      list.innerHTML = '';
      course.lessons.forEach((l,i)=>{
        const row = document.createElement('button');
        row.className = 'btn ghost';
        row.textContent = `${i+1}. ${l.title}`;
        row.style.justifyContent = 'flex-start';
        row.onclick = ()=> selectLesson(l);
        list.appendChild(row);
      })

      document.getElementById('courseDetail').style.display = 'block';
      scrollToSection('courseDetail');
      updateCourseProgressUI();
    }

    function selectLesson(lesson){
      document.getElementById('videoPlayer').textContent = `▶ Playing: ${lesson.title}`;
      // mark complete for demo after 1s
      setTimeout(()=>{
        state.progress[lesson.id] = true;
        updateCourseProgressUI();
      }, 1000);
    }

    function updateCourseProgressUI(){
      const course = state.selectedCourse;
      if(!course) return;
      const total = course.lessons.length;
      const done = course.lessons.filter(l=> state.progress[l.id]).length;
      const pct = Math.round((done/total)*100) || 0;
      document.getElementById('cdProgress').style.width = pct + '%';
      document.getElementById('cdProgressText').textContent = pct + '%';
    }

    async function checkout(courseId){
      if(!state.token){
        openLogin();
        return;
      }
      // Replace with real backend redirect to Stripe/PayPal session URL
      // Example (Stripe):
      // const res = await fetch(`${API_BASE}/payments/checkout?courseId=${courseId}`, { headers:{Authorization:`Bearer ${state.token}`}});
      // const {checkoutUrl} = await res.json();
      // location.href = checkoutUrl;
      alert('Demo checkout for course #' + courseId + '\nImplement Stripe/PayPal session on the backend and redirect here.');
    }

    // === Auth ===
    const loginModal = document.getElementById('loginModal');
    const loginBtn = document.getElementById('loginBtn');
    const ctaLogin = document.getElementById('ctaLogin');
    loginBtn.onclick = openLogin; ctaLogin.onclick = openLogin;

    function openLogin(){ loginModal.showModal(); }

    document.getElementById('loginSubmit').addEventListener('click', async (e)=>{
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();
      if(!email || !password) return;
      try{
        // Replace with real API call:
        // const res = await fetch(`${API_BASE}/auth/login`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({email, password}) });
        // const data = await res.json();
        // state.token = data.token; state.user = data.user;
        // Demo success
        state.token = 'demo.jwt.token';
        state.user = {email};
        localStorage.setItem('token', state.token);
        localStorage.setItem('user', JSON.stringify(state.user));
        renderAuthedNav();
        renderProfile();
        loginModal.close();
      }catch(err){
        console.error(err);
        alert('Login failed');
      }
    });

    function renderAuthedNav(){
      const nav = document.getElementById('nav-links');
      const isAuthed = !!state.token;
      nav.innerHTML = `
        <a href="#home" class="active">Home</a>
        <a href="#courses">Courses</a>
        <a href="#profile">Profile</a>
        ${isAuthed ? `<button class="btn ghost" id="logoutBtn">Logout</button>` : `<button class="btn ghost" id="loginBtn">Sign In</button>`}`;
      document.getElementById(isAuthed ? 'logoutBtn' : 'loginBtn').onclick = isAuthed ? logout : openLogin;
    }

    function logout(){
      state.token = null; state.user = null; localStorage.clear();
      renderAuthedNav();
      renderProfile();
    }

    function renderProfile(){
      const box = document.getElementById('profileBox');
      if(!state.token){ box.innerHTML = 'Sign in to see your enrollments and progress.'; return; }
      box.innerHTML = `
        <div style="display:grid; gap:8px">
          <div><span class="muted">Signed in as</span><br><b>${state.user?.email || 'user'}</b></div>
          <div class="grid cards" style="grid-template-columns: repeat(auto-fill, minmax(200px,1fr));">
            ${(state.courses.length? state.courses : demoCourses).slice(0,2).map(c=>
              `<div class='card pad'><div class='muted'>Enrolled</div><div><b>${c.title}</b></div><button class='btn ghost' onclick='openCourse(${c.id})'>Continue</button></div>`
            ).join('')}
          </div>
        </div>`;
    }

    // Init
    (function init(){
      document.getElementById('year').textContent = new Date().getFullYear();
      renderAuthedNav();
      renderCourses();
      renderProfile();
      setActiveNav(location.hash || '#home');
    })();
  </script>
</body>
</html>
